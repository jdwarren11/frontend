<html>
<head>
  <title>Bakery Bonanza</title>
  <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/foundation/5.2.3/css/foundation.min.css">
  <link rel="stylesheet" type="text/css" href="css/style.css">
</head>
<body>

  <div class="row main">
    <div class="large-8 large-centered columns">
        <div id="bakery">
          <button class="make" data-good-type="cupcake">Make Cupcake</button>
          <button class="make" data-good-type="cookie">Make Cookie</button>
          <h4>Available Ingredients:</h4>
          <ul class="ingredients">
            <li class="flour">Flour: <span></span></li>
            <li class="eggs">Eggs: <span></span></li>
            <li class="sugar">Sugar: <span></span></li>
            <li class="spice">Spice: <span></span></li>
          </ul>

          <h3>Food Display Case</h3>
          <div class="display"></div>
        </div>
    </div>
  </div>


  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
  <script type="text/javascript">

    var bakery = {
      supplies: {
        flour: 4,
        eggs: 12,
        sugar: 17,
        spice: 5
      },
      goodRequirements: {
        cupcake: {
          flour: 2,
          eggs: 1,
          sugar: 1
        },
        // TODO: Create required ingredients for cookie
        cookie: {
          flour: 2,
          eggs: 2,
          sugar: 3
        }
      },
      make: function (goodType) {
        console.log('Attempting to make a:', goodType);
        var req = this.goodRequirements[goodType];
        var check = this.checkSupplies(req);
        // TODO: Only make if we have enough ingredients
        if (check === true) {
          // TODO: Reduce the bakery's supplies by the required amount
          this.updateIngredientsList();
          console.log('The bakery made a ' + goodType + '!');

          // TODO: Add class goodType class to div
          var goodDiv = $("<div id='bakery' class='display " + goodType + "' ></div>");
          $('#bakery .display').append(goodDiv);
        }
      },
      updateIngredientsList: function () {
        $('.ingredients .flour span').text(this.supplies.flour);
        // TODO: Update rest of ingredients
        // $('.ingredients '+ ingredients +' span').text(this.supplies.flour); --> for loop??
        $('.ingredients .eggs span').text(this.supplies.eggs);
        $('.ingredients .sugar span').text(this.supplies.sugar);
        $('.ingredients .spice span').text(this.supplies.spice);

      },
      checkSupplies: function (req) {
        if ((bakery.supplies.flour - req.flour >= 0) &&
          (bakery.supplies.eggs - req.eggs >= 0) &&
          (bakery.supplies.sugar - req.sugar >= 0) &&
          (bakery.supplies.spice - req.spice >= 0 || bakery.supplies.flour - req.flour === NaN)) {
            return true
          } else {
            return false
          }
      }
    };

    $('#bakery .make').on('click', function (e) {
      var goodType = $(e.currentTarget).data('good-type');
      // TODO: Make the good
      bakery.make(goodType);
    });

    bakery.updateIngredientsList();

  </script>
</body>
</html>